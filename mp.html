

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Multiprocessing functionality &mdash; Creamas 0.4.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Distributed Systems" href="ds.html" />
    <link rel="prev" title="Simulation" href="simulation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Creamas
          

          
          </a>

          
            
            
              <div class="version">
                0.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_agent.html">Implementing Agent Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="create_sim.html">Using Simulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_mp_ds.html">Multiprocessing and Distributed Systems</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="api.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="core.html">Core</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Multiprocessing functionality</a></li>
<li class="toctree-l2"><a class="reference internal" href="ds.html">Distributed Systems</a></li>
<li class="toctree-l2"><a class="reference internal" href="grid.html">2D Grid Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="nx.html">NetworkX Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="vote.html">Voting for Agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="util.html">Assorted Utility Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="rules.html">Rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="mappers.html">Mappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="domains.html">Domains</a></li>
<li class="toctree-l2"><a class="reference internal" href="math.html">Math</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging.html">Logging</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Creamas</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="api.html">API Documentation</a> &raquo;</li>
        
      <li>Multiprocessing functionality</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/mp.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-creamas.mp">
<span id="multiprocessing-functionality"></span><h1>Multiprocessing functionality<a class="headerlink" href="#module-creamas.mp" title="Permalink to this headline">¶</a></h1>
<span class="target" id="module-mp"></span><p>This module contains multiprocessing implementation for <a class="reference internal" href="environment.html#creamas.core.environment.Environment" title="creamas.core.environment.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>,
<a class="reference internal" href="#creamas.mp.MultiEnvironment" title="creamas.mp.MultiEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiEnvironment</span></code></a>.</p>
<p>A <a class="reference internal" href="#creamas.mp.MultiEnvironment" title="creamas.mp.MultiEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiEnvironment</span></code></a> holds several <a class="reference internal" href="environment.html#creamas.core.environment.Environment" title="creamas.core.environment.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a> slaves, which are
spawned on their own processes, and uses managers to obtain much of the same functionality as the single processor
environment. See <a class="reference internal" href="#creamas.mp.EnvManager" title="creamas.mp.EnvManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnvManager</span></code></a> and <a class="reference internal" href="#creamas.mp.MultiEnvManager" title="creamas.mp.MultiEnvManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiEnvManager</span></code></a> for details.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This functionality is currently largely untested. However, it <em>seems</em> to work as intended and may be used in
<a class="reference internal" href="simulation.html#creamas.core.simulation.Simulation" title="creamas.core.simulation.Simulation"><code class="xref py py-class docutils literal notranslate"><span class="pre">Simulation</span></code></a>.</p>
</div>
<dl class="class">
<dt id="creamas.mp.EnvManager">
<em class="property">class </em><code class="sig-prename descclassname">creamas.mp.</code><code class="sig-name descname">EnvManager</code><span class="sig-paren">(</span><em class="sig-param">environment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager" title="Permalink to this definition">¶</a></dt>
<dd><p>A manager for <a class="reference internal" href="environment.html#creamas.core.environment.Environment" title="creamas.core.environment.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>, which is a subclass of
<a class="reference external" href="https://aiomas.readthedocs.io/en/2.0.1/api_reference/aiomas.subproc.html#aiomas.subproc.Manager" title="(in aiomas v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiomas.subproc.Manager</span></code></a>.</p>
<p>Managers are used in environments which need to be able to execute commands originating from outside sources,
e.g. in slave environments inside a multiprocessing environment.</p>
<p>A manager can spawn other agents into its environment, and can execute other tasks relevant to the environment.
The manager should always be the first agent created to the environment.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should not need to create managers directly, instead pass the desired manager class to an instance of
<a class="reference internal" href="#creamas.mp.MultiEnvironment" title="creamas.mp.MultiEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiEnvironment</span></code></a> at its initialization time.</p>
</div>
<dl class="method">
<dt id="creamas.mp.EnvManager.artifacts">
<code class="sig-name descname">artifacts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.artifacts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.artifacts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return artifacts from the managed environment.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param">folder=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Implemented for consistency. This basic implementation does nothing.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.create_connections">
<code class="sig-name descname">create_connections</code><span class="sig-paren">(</span><em class="sig-param">connection_map</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.create_connections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.create_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Create connections for agents in the environment.</p>
<p>This is a managing function for <a class="reference internal" href="environment.html#creamas.core.environment.Environment.create_connections" title="creamas.core.environment.Environment.create_connections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_connections()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.get_agents">
<code class="sig-name descname">get_agents</code><span class="sig-paren">(</span><em class="sig-param">addr=True</em>, <em class="sig-param">agent_cls=None</em>, <em class="sig-param">as_coro=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.get_agents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.get_agents" title="Permalink to this definition">¶</a></dt>
<dd><p>Get agents from the managed environment.</p>
<p>This is a managing function for the <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_agents()</span></code>. The returned
agent list excludes the environment’s manager agent (i.e. this agent) by design.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.get_artifacts">
<em class="property">async </em><code class="sig-name descname">get_artifacts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.get_artifacts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.get_artifacts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all artifacts from the host environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>All the artifacts in the environment.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.get_connections">
<code class="sig-name descname">get_connections</code><span class="sig-paren">(</span><em class="sig-param">data=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.get_connections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.get_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Get connections from the agents in the environment.</p>
<p>This is a managing function for <a class="reference internal" href="environment.html#creamas.core.environment.Environment.get_connections" title="creamas.core.environment.Environment.get_connections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_connections()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.handle">
<code class="sig-name descname">handle</code><span class="sig-paren">(</span><em class="sig-param">msg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.handle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle message, override in subclass if needed.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.host_manager">
<code class="sig-name descname">host_manager</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.host_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.host_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Get address of the host manager.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.is_ready">
<em class="property">async </em><code class="sig-name descname">is_ready</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.is_ready"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.is_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the managed environment is ready.</p>
<p>This is a managing function for <code class="xref py py-meth docutils literal notranslate"><span class="pre">is_ready()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.report">
<em class="property">async </em><code class="sig-name descname">report</code><span class="sig-paren">(</span><em class="sig-param">msg</em>, <em class="sig-param">timeout=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.report"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.report" title="Permalink to this definition">¶</a></dt>
<dd><p>Report message to the host manager.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.set_host_manager">
<code class="sig-name descname">set_host_manager</code><span class="sig-paren">(</span><em class="sig-param">addr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.set_host_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.set_host_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Set host (or master) manager for this manager.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>addr</strong> – Address for the host manager.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.spawn_n">
<em class="property">async </em><code class="sig-name descname">spawn_n</code><span class="sig-paren">(</span><em class="sig-param">agent_cls</em>, <em class="sig-param">n</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.spawn_n"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.spawn_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawn <code class="xref py py-attr docutils literal notranslate"><span class="pre">n</span></code> agents to the managed environment.</p>
<p>This is a convenience function so that one does not have to repeatedly make connections to the environment to
spawn multiple agents with the same parameters.</p>
<p>See <a class="reference external" href="https://aiomas.readthedocs.io/en/2.0.1/api_reference/aiomas.subproc.html#aiomas.subproc.Manager.spawn" title="(in aiomas v2.0)"><code class="xref py py-meth docutils literal notranslate"><span class="pre">aiomas.subproc.Manager.spawn()</span></code></a> for details.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.EnvManager.trigger_all">
<em class="property">async </em><code class="sig-name descname">trigger_all</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#EnvManager.trigger_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.EnvManager.trigger_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Trigger all agents in the managed environment to act once.</p>
<p>This is a managing function for <a class="reference internal" href="environment.html#creamas.core.environment.Environment.trigger_all" title="creamas.core.environment.Environment.trigger_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trigger_all()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="creamas.mp.MultiEnvManager">
<em class="property">class </em><code class="sig-prename descclassname">creamas.mp.</code><code class="sig-name descname">MultiEnvManager</code><span class="sig-paren">(</span><em class="sig-param">environment</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager" title="Permalink to this definition">¶</a></dt>
<dd><p>A manager for <a class="reference internal" href="#creamas.mp.MultiEnvironment" title="creamas.mp.MultiEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiEnvironment</span></code></a>, which is a subclass of <a class="reference external" href="https://aiomas.readthedocs.io/en/2.0.1/api_reference/aiomas.subproc.html#aiomas.subproc.Manager" title="(in aiomas v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiomas.subproc.Manager</span></code></a>.</p>
<p>A Manager can spawn other agents into its slave environments, and can
execute other tasks relevant to the whole environment. The manager should
always be the first (and usually only) agent created for the
multi-environment’s managing environment. The actual simulation agents
should be created to the slave environments, typically using
multi-environment’s or its manager’s functionality.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You should not need to create managers directly, instead pass the
desired manager class to an instance of
<a class="reference internal" href="#creamas.mp.MultiEnvironment" title="creamas.mp.MultiEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiEnvironment</span></code></a> at its initialization time.</p>
</div>
<dl class="method">
<dt id="creamas.mp.MultiEnvManager.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param">folder=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Implemented for consistency. This basic implementation does nothing.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.create_connections">
<em class="property">async </em><code class="sig-name descname">create_connections</code><span class="sig-paren">(</span><em class="sig-param">connection_map</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.create_connections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.create_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Create connections for agents in the multi-environment.</p>
<p>This is a managing function for
<a class="reference internal" href="#creamas.mp.MultiEnvironment.create_connections" title="creamas.mp.MultiEnvironment.create_connections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_connections()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.get_agents">
<em class="property">async </em><code class="sig-name descname">get_agents</code><span class="sig-paren">(</span><em class="sig-param">addr=True</em>, <em class="sig-param">agent_cls=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.get_agents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.get_agents" title="Permalink to this definition">¶</a></dt>
<dd><p>Get addresses of all agents in all the slave environments.</p>
<p>This is a managing function for
<a class="reference internal" href="#creamas.mp.MultiEnvironment.get_agents" title="creamas.mp.MultiEnvironment.get_agents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creamas.mp.MultiEnvironment.get_agents()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since <a class="reference external" href="https://aiomas.readthedocs.io/en/2.0.1/api_reference/aiomas.rpc.html#aiomas.rpc.Proxy" title="(in aiomas v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiomas.rpc.Proxy</span></code></a> objects do not seem to handle
(re)serialization, <code class="docutils literal notranslate"><span class="pre">addr</span></code> and <code class="docutils literal notranslate"><span class="pre">agent_cls</span></code> parameters are
omitted from the call to underlying multi-environment’s
<a class="reference internal" href="#creamas.mp.MultiEnvManager.get_agents" title="creamas.mp.MultiEnvManager.get_agents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_agents()</span></code></a>.</p>
<p>If <a class="reference external" href="https://aiomas.readthedocs.io/en/2.0.1/api_reference/aiomas.rpc.html#aiomas.rpc.Proxy" title="(in aiomas v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiomas.rpc.Proxy</span></code></a> objects from all the agents are
needed, call each slave environment manager’s <a class="reference internal" href="#creamas.mp.MultiEnvManager.get_agents" title="creamas.mp.MultiEnvManager.get_agents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_agents()</span></code></a>
directly.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.get_artifacts">
<em class="property">async </em><code class="sig-name descname">get_artifacts</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.get_artifacts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.get_artifacts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all the artifacts from the multi-environment.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.get_connections">
<em class="property">async </em><code class="sig-name descname">get_connections</code><span class="sig-paren">(</span><em class="sig-param">data=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.get_connections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.get_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Return connections for all the agents in the slave environments.</p>
<p>This is a managing function for
<a class="reference internal" href="#creamas.mp.MultiEnvironment.get_connections" title="creamas.mp.MultiEnvironment.get_connections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_connections()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.get_slave_managers">
<em class="property">async </em><code class="sig-name descname">get_slave_managers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.get_slave_managers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.get_slave_managers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get addresses of the slave environment managers in this
multi-environment.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.handle">
<code class="sig-name descname">handle</code><span class="sig-paren">(</span><em class="sig-param">msg</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.handle"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.handle" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle message from a slave manager.</p>
<p><strong>This is a dummy method which should be overridden in a subclass.</strong></p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.is_ready">
<em class="property">async </em><code class="sig-name descname">is_ready</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.is_ready"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.is_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>A managing function for
<a class="reference internal" href="#creamas.mp.MultiEnvironment.is_ready" title="creamas.mp.MultiEnvironment.is_ready"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_ready()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.set_as_host_manager">
<em class="property">async </em><code class="sig-name descname">set_as_host_manager</code><span class="sig-paren">(</span><em class="sig-param">addr</em>, <em class="sig-param">timeout=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.set_as_host_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.set_as_host_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the this manager as a host manager for the manager in <em>addr</em>.</p>
<p>This is a managing function for
<a class="reference internal" href="#creamas.mp.MultiEnvironment.set_host_manager" title="creamas.mp.MultiEnvironment.set_host_manager"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_host_manager()</span></code></a>.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.spawn">
<em class="property">async </em><code class="sig-name descname">spawn</code><span class="sig-paren">(</span><em class="sig-param">agent_cls</em>, <em class="sig-param">*args</em>, <em class="sig-param">addr=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.spawn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawn an agent to the environment.</p>
<p>This is a managing function for
<a class="reference internal" href="#creamas.mp.MultiEnvironment.spawn" title="creamas.mp.MultiEnvironment.spawn"><code class="xref py py-meth docutils literal notranslate"><span class="pre">spawn()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since <a class="reference external" href="https://aiomas.readthedocs.io/en/2.0.1/api_reference/aiomas.rpc.html#aiomas.rpc.Proxy" title="(in aiomas v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiomas.rpc.Proxy</span></code></a> objects do not seem to handle
(re)serialization, only the address of the spawned agent is
returned.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.spawn_n">
<em class="property">async </em><code class="sig-name descname">spawn_n</code><span class="sig-paren">(</span><em class="sig-param">agent_cls</em>, <em class="sig-param">n</em>, <em class="sig-param">*args</em>, <em class="sig-param">addr=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.spawn_n"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.spawn_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#creamas.mp.MultiEnvManager.spawn" title="creamas.mp.MultiEnvManager.spawn"><code class="xref py py-meth docutils literal notranslate"><span class="pre">spawn()</span></code></a>, but spawn
<code class="xref py py-attr docutils literal notranslate"><span class="pre">n</span></code> agents with same initialization parameters.</p>
<p>This is a managing function for
<a class="reference internal" href="#creamas.mp.MultiEnvironment.spawn_n" title="creamas.mp.MultiEnvironment.spawn_n"><code class="xref py py-meth docutils literal notranslate"><span class="pre">spawn_n()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since <a class="reference external" href="https://aiomas.readthedocs.io/en/2.0.1/api_reference/aiomas.rpc.html#aiomas.rpc.Proxy" title="(in aiomas v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiomas.rpc.Proxy</span></code></a> objects do not seem to handle
(re)serialization, only the addresses of the spawned agents are
returned.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvManager.trigger_all">
<em class="property">async </em><code class="sig-name descname">trigger_all</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvManager.trigger_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvManager.trigger_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Trigger all agents in the managed multi-environment to act.</p>
<p>This is a managing function for
<a class="reference internal" href="#creamas.mp.MultiEnvironment.trigger_all" title="creamas.mp.MultiEnvironment.trigger_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">trigger_all()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="creamas.mp.MultiEnvironment">
<em class="property">class </em><code class="sig-prename descclassname">creamas.mp.</code><code class="sig-name descname">MultiEnvironment</code><span class="sig-paren">(</span><em class="sig-param">addr</em>, <em class="sig-param">env_cls</em>, <em class="sig-param">mgr_cls=None</em>, <em class="sig-param">name=None</em>, <em class="sig-param">logger=None</em>, <em class="sig-param">**env_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment" title="Permalink to this definition">¶</a></dt>
<dd><p>Environment for utilizing multiple processes (and cores) on a single
machine. <a class="reference internal" href="#creamas.mp.MultiEnvironment" title="creamas.mp.MultiEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiEnvironment</span></code></a> is not a subclass of
<a class="reference internal" href="environment.html#creamas.core.environment.Environment" title="creamas.core.environment.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">creamas.core.environment.Environment</span></code></a>.</p>
<p><a class="reference internal" href="#creamas.mp.MultiEnvironment" title="creamas.mp.MultiEnvironment"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiEnvironment</span></code></a> has a master environment, typically
containing only a single manager, and a set of slave environments each
having their own manager and (once spawned) the actual agents.</p>
<p>Order of usage is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">aiomas</span>

<span class="kn">from</span> <span class="nn">creamas</span> <span class="n">Environment</span>
<span class="kn">from</span> <span class="nn">creamas.mp</span> <span class="k">import</span> <span class="n">EnvManager</span><span class="p">,</span> <span class="n">MultiEnvironment</span>
<span class="kn">from</span> <span class="nn">creamas.util</span> <span class="k">import</span> <span class="n">run</span>

<span class="c"># Create the multi-environment and the environment used to connect to</span>
<span class="c"># slave environments</span>
<span class="n">addr</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">5555</span><span class="p">)</span>
<span class="n">env_cls</span> <span class="o">=</span> <span class="n">Environment</span>
<span class="n">env_kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;codec&#39;</span><span class="p">:</span> <span class="n">aiomas</span><span class="o">.</span><span class="n">MsgPack</span><span class="p">}</span>
<span class="n">menv</span> <span class="o">=</span> <span class="n">MultiEnvironment</span><span class="p">(</span><span class="n">addr</span><span class="p">,</span> <span class="n">env_cls</span><span class="p">,</span> <span class="o">**</span><span class="n">env_kwargs</span><span class="p">)</span>

<span class="c"># Define slave environments and their arguments</span>
<span class="n">slave_addrs</span> <span class="o">=</span> <span class="p">[(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">5556</span><span class="p">),</span> <span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">5557</span><span class="p">)]</span>
<span class="n">slave_env_cls</span> <span class="o">=</span> <span class="n">Environment</span>
<span class="n">slave_mgr_cls</span> <span class="o">=</span> <span class="n">EnvManager</span>
<span class="n">n_slaves</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">slave_kwargs</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;codec&#39;</span><span class="p">:</span> <span class="n">aiomas</span><span class="o">.</span><span class="n">MsgPack</span><span class="p">}</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_slaves</span><span class="p">)]</span>

<span class="c"># Spawn the actual slave environments</span>
<span class="n">menv</span><span class="o">.</span><span class="n">spawn_slaves</span><span class="p">(</span><span class="n">slave_addrs</span><span class="p">,</span> <span class="n">slave_env_cls</span><span class="p">,</span>
                  <span class="n">slave_mgr_cls</span><span class="p">,</span> <span class="n">slave_kwargs</span><span class="p">)</span>

<span class="c"># Wait that all the slaves are ready, if you need to do some other</span>
<span class="c"># preparation before environments&#39; return True for is_ready, then</span>
<span class="c"># change check_ready=False</span>
<span class="n">run</span><span class="p">(</span><span class="n">menv</span><span class="o">.</span><span class="n">wait_slaves</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="n">check_ready</span><span class="o">=</span><span class="k">True</span><span class="p">))</span>

<span class="c"># Do any additional preparations here, like spawning the agents to</span>
<span class="c"># slave environments.</span>

<span class="c"># Trigger all agents to act</span>
<span class="n">run</span><span class="p">(</span><span class="n">menv</span><span class="o">.</span><span class="n">trigger_all</span><span class="p">())</span>

<span class="c"># Destroy the environment to free the resources</span>
<span class="n">menv</span><span class="o">.</span><span class="n">destroy</span><span class="p">(</span><span class="n">as_coro</span><span class="o">=</span><span class="k">False</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addr</strong> – <code class="docutils literal notranslate"><span class="pre">(HOST,</span> <span class="pre">PORT)</span></code> address for the master environment.</p></li>
<li><p><strong>env_cls</strong> – Class for the master environment, used to make connections to the
slave environments. Must be a subclass of
<a class="reference internal" href="environment.html#creamas.core.environment.Environment" title="creamas.core.environment.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>.</p></li>
<li><p><strong>mgr_cls</strong> – Class for the multi-environment’s manager.</p></li>
<li><p><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Name of the environment. Will be shown in logs.</p></li>
<li><p><strong>logger</strong> – Optional. Logger for the master environment.</p></li>
</ul>
</dd>
</dl>
<dl class="method">
<dt id="creamas.mp.MultiEnvironment.add_artifact">
<code class="sig-name descname">add_artifact</code><span class="sig-paren">(</span><em class="sig-param">artifact</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.add_artifact"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.add_artifact" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an artifact to the environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>artifact</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#object" title="(in Python v3.7)"><em>object</em></a>) – Artifact to be added.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.add_artifacts">
<code class="sig-name descname">add_artifacts</code><span class="sig-paren">(</span><em class="sig-param">artifacts</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.add_artifacts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.add_artifacts" title="Permalink to this definition">¶</a></dt>
<dd><p>Add artifacts to <a class="reference internal" href="#creamas.mp.MultiEnvironment.artifacts" title="creamas.mp.MultiEnvironment.artifacts"><code class="xref py py-attr docutils literal notranslate"><span class="pre">artifacts</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>artifacts</strong> – list of <a class="reference internal" href="artifact.html#creamas.core.artifact.Artifact" title="creamas.core.artifact.Artifact"><code class="xref py py-class docutils literal notranslate"><span class="pre">Artifact</span></code></a> objects</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.check_ready">
<code class="sig-name descname">check_ready</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.check_ready"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.check_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if this multi-environment itself is ready.</p>
<p>Override in subclass if it needs any additional (asynchronous)
initialization other than spawning its slave environments.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)">bool</a></p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>This basic implementation returns always True.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param">folder=None</em>, <em class="sig-param">as_coro=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.close"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the multiprocessing environment and its slave environments.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.connect">
<em class="property">async </em><code class="sig-name descname">connect</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.connect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>A shortcut to <code class="xref py py-meth docutils literal notranslate"><span class="pre">env.connect()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.create_connections">
<code class="sig-name descname">create_connections</code><span class="sig-paren">(</span><em class="sig-param">connection_map</em>, <em class="sig-param">as_coro=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.create_connections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.create_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Create agent connections from the given connection map.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>connection_map</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A map of connections to be created. Dictionary where keys are
agent addresses and values are lists of (addr, data)-tuples
suitable for
<a class="reference internal" href="agent.html#creamas.core.agent.CreativeAgent.add_connections" title="creamas.core.agent.CreativeAgent.add_connections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_connections()</span></code></a>.</p></li>
<li><p><strong>as_coro</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> returns a coroutine, otherwise runs the asynchronous
calls to the slave environment managers in the event loop.</p></li>
</ul>
</dd>
</dl>
<p>Only the connections for the agents that are in the slave environments
are created.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.destroy">
<code class="sig-name descname">destroy</code><span class="sig-paren">(</span><em class="sig-param">folder=None</em>, <em class="sig-param">as_coro=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.destroy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.destroy" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the multiprocessing environment and its slave environments.</p>
<div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 0.4.0: </span>Use <a class="reference internal" href="#creamas.mp.MultiEnvironment.close" title="creamas.mp.MultiEnvironment.close"><code class="xref py py-func docutils literal notranslate"><span class="pre">close()</span></code></a> instead</p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.get_agents">
<code class="sig-name descname">get_agents</code><span class="sig-paren">(</span><em class="sig-param">addr=True</em>, <em class="sig-param">agent_cls=None</em>, <em class="sig-param">as_coro=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.get_agents"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.get_agents" title="Permalink to this definition">¶</a></dt>
<dd><p>Get agents from the slave environments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addr</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, returns only addresses of the agents, otherwise
returns a <code class="xref py py-class docutils literal notranslate"><span class="pre">Proxy</span></code> object for each agent.</p></li>
<li><p><strong>agent_cls</strong> – If specified, returns only agents that are members of that
particular class.</p></li>
<li><p><strong>as_coro</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, returns a coroutine, otherwise runs the method in
an event loop.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A coroutine or list of <code class="xref py py-class docutils literal notranslate"><span class="pre">Proxy</span></code> objects or addresses as
specified by the input parameters.</p>
</dd>
</dl>
<p>Slave environment managers are excluded from the returned list by
default. Essentially, this method calls each slave environment
manager’s <a class="reference internal" href="#creamas.mp.EnvManager.get_agents" title="creamas.mp.EnvManager.get_agents"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creamas.mp.EnvManager.get_agents()</span></code></a> asynchronously.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Calling each slave environment’s manager might be costly in some
situations. Therefore, it is advisable to store the returned agent
list if the agent sets in the slave environments are not bound to
change.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.get_artifacts">
<code class="sig-name descname">get_artifacts</code><span class="sig-paren">(</span><em class="sig-param">agent_name=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.get_artifacts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.get_artifacts" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all artifacts or all artifacts published by a specific agent.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>agent_name</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Optional. Name of the agent which artifacts are returned.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>All artifacts or all artifacts published by the agent.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#list" title="(in Python v3.7)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.get_connections">
<code class="sig-name descname">get_connections</code><span class="sig-paren">(</span><em class="sig-param">data=True</em>, <em class="sig-param">as_coro=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.get_connections"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.get_connections" title="Permalink to this definition">¶</a></dt>
<dd><p>Return connections from all the agents in the slave environments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code>, returns also the data stored for each connection.</p></li>
<li><p><strong>as_coro</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> returns a coroutine, otherwise runs the asynchronous
calls to the slave environment managers in the event loop.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="environment.html#creamas.core.environment.Environment.get_connections" title="creamas.core.environment.Environment.get_connections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creamas.core.environment.Environment.get_connections()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.get_slave_managers">
<code class="sig-name descname">get_slave_managers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.get_slave_managers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.get_slave_managers" title="Permalink to this definition">¶</a></dt>
<dd><p>Get addresses of all slave environment managers.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.is_ready">
<em class="property">async </em><code class="sig-name descname">is_ready</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.is_ready"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.is_ready" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if the multi-environment has been fully initialized.</p>
<p>This calls each slave environment managers’ <a class="reference internal" href="#creamas.mp.MultiEnvironment.is_ready" title="creamas.mp.MultiEnvironment.is_ready"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_ready()</span></code></a> and
checks if the multi-environment itself is ready by calling
<a class="reference internal" href="#creamas.mp.MultiEnvironment.check_ready" title="creamas.mp.MultiEnvironment.check_ready"><code class="xref py py-meth docutils literal notranslate"><span class="pre">check_ready()</span></code></a>.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="environment.html#creamas.core.environment.Environment.is_ready" title="creamas.core.environment.Environment.is_ready"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creamas.core.environment.Environment.is_ready()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.save_info">
<code class="sig-name descname">save_info</code><span class="sig-paren">(</span><em class="sig-param">folder</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.save_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.save_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Save information accumulated during the environment’s lifetime.</p>
<p>Called from <a class="reference internal" href="#creamas.mp.MultiEnvironment.destroy" title="creamas.mp.MultiEnvironment.destroy"><code class="xref py py-meth docutils literal notranslate"><span class="pre">destroy()</span></code></a>. Override
in subclass.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>folder</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – root folder to save information</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.set_host_manager">
<em class="property">async </em><code class="sig-name descname">set_host_manager</code><span class="sig-paren">(</span><em class="sig-param">addr</em>, <em class="sig-param">timeout=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.set_host_manager"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.set_host_manager" title="Permalink to this definition">¶</a></dt>
<dd><p>Set this multi-environment’s manager as the host manager for
a manager agent in <em>addr</em></p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.set_host_managers">
<em class="property">async </em><code class="sig-name descname">set_host_managers</code><span class="sig-paren">(</span><em class="sig-param">timeout=5</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.set_host_managers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.set_host_managers" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the master environment’s manager as host manager for the slave
environment managers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Timeout for connecting to the slave managers.</p>
</dd>
</dl>
<p>This enables the slave environment managers to communicate back to the
master environment. The master environment manager,
<a class="reference internal" href="#creamas.mp.MultiEnvironment.manager" title="creamas.mp.MultiEnvironment.manager"><code class="xref py py-attr docutils literal notranslate"><span class="pre">manager</span></code></a>, must be an instance
of <a class="reference internal" href="#creamas.mp.MultiEnvManager" title="creamas.mp.MultiEnvManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">MultiEnvManager</span></code></a> or its subclass if this method
is called.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.spawn">
<em class="property">async </em><code class="sig-name descname">spawn</code><span class="sig-paren">(</span><em class="sig-param">agent_cls</em>, <em class="sig-param">*args</em>, <em class="sig-param">addr=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.spawn"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.spawn" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawn a new agent in a slave environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_cls</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – <cite>qualname`</cite> of the agent class.
That is, the name should be in the form <code class="docutils literal notranslate"><span class="pre">pkg.mod:cls</span></code>, e.g.
<code class="docutils literal notranslate"><span class="pre">creamas.core.agent:CreativeAgent</span></code>.</p></li>
<li><p><strong>addr</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Optional. Address for the slave enviroment’s manager.
If <code class="xref py py-attr docutils literal notranslate"><span class="pre">addr</span></code> is None, spawns the agent in the slave environment
with currently smallest number of agents.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><a class="reference external" href="https://aiomas.readthedocs.io/en/2.0.1/api_reference/aiomas.rpc.html#aiomas.rpc.Proxy" title="(in aiomas v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiomas.rpc.Proxy</span></code></a> and address for the created agent.</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> are passed down to the agent’s
<code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use <a class="reference internal" href="#creamas.mp.MultiEnvironment.spawn_n" title="creamas.mp.MultiEnvironment.spawn_n"><code class="xref py py-meth docutils literal notranslate"><span class="pre">spawn_n()</span></code></a> to spawn large
number of agents with identical initialization parameters.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.spawn_n">
<em class="property">async </em><code class="sig-name descname">spawn_n</code><span class="sig-paren">(</span><em class="sig-param">agent_cls</em>, <em class="sig-param">n</em>, <em class="sig-param">*args</em>, <em class="sig-param">addr=None</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.spawn_n"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.spawn_n" title="Permalink to this definition">¶</a></dt>
<dd><p>Same as <a class="reference internal" href="#creamas.mp.MultiEnvironment.spawn" title="creamas.mp.MultiEnvironment.spawn"><code class="xref py py-meth docutils literal notranslate"><span class="pre">spawn()</span></code></a>, but allows
spawning multiple agents with the same initialization parameters
simultaneously into <strong>one</strong> slave environment.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>agent_cls</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – <code class="docutils literal notranslate"><span class="pre">qualname</span></code> of the agent class. That is, the name should be in the
form of <code class="docutils literal notranslate"><span class="pre">pkg.mod:cls</span></code>, e.g. <code class="docutils literal notranslate"><span class="pre">creamas.core.agent:CreativeAgent</span></code>.</p></li>
<li><p><strong>n</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Number of agents to spawn</p></li>
<li><p><strong>addr</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Optional. Address for the slave enviroment’s manager.
If <code class="xref py py-attr docutils literal notranslate"><span class="pre">addr</span></code> is None, spawns the agents in the slave environment
with currently smallest number of agents.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of (<a class="reference external" href="https://aiomas.readthedocs.io/en/2.0.1/api_reference/aiomas.rpc.html#aiomas.rpc.Proxy" title="(in aiomas v2.0)"><code class="xref py py-class docutils literal notranslate"><span class="pre">aiomas.rpc.Proxy</span></code></a>, address)-tuples for the
spawned agents.</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">*args</span></code> and <code class="docutils literal notranslate"><span class="pre">**kwargs</span></code> are passed down to each agent’s
<code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.spawn_slaves">
<em class="property">async </em><code class="sig-name descname">spawn_slaves</code><span class="sig-paren">(</span><em class="sig-param">slave_addrs</em>, <em class="sig-param">slave_env_cls</em>, <em class="sig-param">slave_mgr_cls</em>, <em class="sig-param">slave_kwargs=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.spawn_slaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.spawn_slaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawn slave environments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>slave_addrs</strong> – List of (HOST, PORT) addresses for the slave-environments.</p></li>
<li><p><strong>slave_env_cls</strong> – Class for the slave environments.</p></li>
<li><p><strong>slave_kwargs</strong> – If not None, must be a list of the same size as <em>addrs</em>. Each item
in the list containing parameter values for one slave environment.</p></li>
<li><p><strong>slave_mgr_cls</strong> – Class of the slave environment managers.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.stop_slaves">
<em class="property">async </em><code class="sig-name descname">stop_slaves</code><span class="sig-paren">(</span><em class="sig-param">timeout=1</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.stop_slaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.stop_slaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Stop all the slaves by sending a stop-message to their managers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Timeout for connecting to each manager. If a connection can not
be made before the timeout expires, the resulting error for that
particular manager is logged, but the stopping of other managers
is not halted.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.trigger_act">
<em class="property">async </em><code class="sig-name descname">trigger_act</code><span class="sig-paren">(</span><em class="sig-param">addr</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.trigger_act"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.trigger_act" title="Permalink to this definition">¶</a></dt>
<dd><p>Trigger agent in <code class="xref py py-attr docutils literal notranslate"><span class="pre">addr</span></code> to act.</p>
<p>This method is quite inefficient if used repeatedly for a large number
of agents.</p>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="#creamas.mp.MultiEnvironment.trigger_all" title="creamas.mp.MultiEnvironment.trigger_all"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creamas.mp.MultiEnvironment.trigger_all()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.trigger_all">
<em class="property">async </em><code class="sig-name descname">trigger_all</code><span class="sig-paren">(</span><em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.trigger_all"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.trigger_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Trigger all agents in all the slave environments to <code class="xref py py-meth docutils literal notranslate"><span class="pre">act()</span></code>
asynchronously.</p>
<p>Given arguments and keyword arguments are passed down to each agent’s
<a class="reference internal" href="agent.html#creamas.core.agent.CreativeAgent.act" title="creamas.core.agent.CreativeAgent.act"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creamas.core.agent.CreativeAgent.act()</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By design, the manager agents in each slave environment, i.e.
<a class="reference internal" href="#creamas.mp.MultiEnvironment.manager" title="creamas.mp.MultiEnvironment.manager"><code class="xref py py-attr docutils literal notranslate"><span class="pre">manager</span></code></a>, are excluded from acting.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.wait_slaves">
<em class="property">async </em><code class="sig-name descname">wait_slaves</code><span class="sig-paren">(</span><em class="sig-param">timeout</em>, <em class="sig-param">check_ready=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#MultiEnvironment.wait_slaves"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.MultiEnvironment.wait_slaves" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait until all slaves are online (their managers accept connections)
or timeout expires.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#int" title="(in Python v3.7)"><em>int</em></a>) – Timeout (in seconds) after which the method will return even though
all the slaves are not online yet.</p></li>
<li><p><strong>check_ready</strong> (<a class="reference external" href="https://docs.python.org/3.7/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If <code class="docutils literal notranslate"><span class="pre">True</span></code> also checks if all slave environment’s are ready.
A slave environment is assumed to be ready when its manager’s
<a class="reference internal" href="#creamas.mp.MultiEnvironment.is_ready" title="creamas.mp.MultiEnvironment.is_ready"><code class="xref py py-meth docutils literal notranslate"><span class="pre">is_ready()</span></code></a>-method returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
</ul>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="environment.html#creamas.core.environment.Environment.is_ready" title="creamas.core.environment.Environment.is_ready"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creamas.core.environment.Environment.is_ready()</span></code></a>,
<a class="reference internal" href="#creamas.mp.EnvManager.is_ready" title="creamas.mp.EnvManager.is_ready"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creamas.mp.EnvManager.is_ready()</span></code></a>,
<a class="reference internal" href="#creamas.mp.MultiEnvManager.is_ready" title="creamas.mp.MultiEnvManager.is_ready"><code class="xref py py-meth docutils literal notranslate"><span class="pre">creamas.mp.MultiEnvManager.is_ready()</span></code></a></p>
</div>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.addrs">
<em class="property">property </em><code class="sig-name descname">addrs</code><a class="headerlink" href="#creamas.mp.MultiEnvironment.addrs" title="Permalink to this definition">¶</a></dt>
<dd><p>Addresses of the slave environment managers.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.artifacts">
<em class="property">property </em><code class="sig-name descname">artifacts</code><a class="headerlink" href="#creamas.mp.MultiEnvironment.artifacts" title="Permalink to this definition">¶</a></dt>
<dd><p>Published artifacts for all agents.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.env">
<em class="property">property </em><code class="sig-name descname">env</code><a class="headerlink" href="#creamas.mp.MultiEnvironment.env" title="Permalink to this definition">¶</a></dt>
<dd><p>The environment hosting the manager of this multi-environment.</p>
<p>This environment is also used without the manager to connect to the
slave environment managers and communicate with them.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.logger">
<em class="property">property </em><code class="sig-name descname">logger</code><a class="headerlink" href="#creamas.mp.MultiEnvironment.logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Logger for the environment.</p>
<p>Logger should have at least <code class="xref py py-meth docutils literal notranslate"><span class="pre">log()</span></code> method which takes two
arguments: a log level and a message.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.manager">
<em class="property">property </em><code class="sig-name descname">manager</code><a class="headerlink" href="#creamas.mp.MultiEnvironment.manager" title="Permalink to this definition">¶</a></dt>
<dd><p>This multi-environment’s master manager.</p>
</dd></dl>

<dl class="method">
<dt id="creamas.mp.MultiEnvironment.name">
<em class="property">property </em><code class="sig-name descname">name</code><a class="headerlink" href="#creamas.mp.MultiEnvironment.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the environment.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="creamas.mp.set_base_timeout">
<code class="sig-prename descclassname">creamas.mp.</code><code class="sig-name descname">set_base_timeout</code><span class="sig-paren">(</span><em class="sig-param">timeout</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#set_base_timeout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.set_base_timeout" title="Permalink to this definition">¶</a></dt>
<dd><p>Set base timeout (in seconds) for the rpc calls originating from the instances in this module.</p>
</dd></dl>

<dl class="function">
<dt id="creamas.mp.spawn_container">
<code class="sig-prename descclassname">creamas.mp.</code><code class="sig-name descname">spawn_container</code><span class="sig-paren">(</span><em class="sig-param">addr</em>, <em class="sig-param">env_cls=&lt;class 'creamas.core.environment.Environment'&gt;</em>, <em class="sig-param">mgr_cls=&lt;class 'creamas.mp.EnvManager'&gt;</em>, <em class="sig-param">set_seed=True</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#spawn_container"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.spawn_container" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawn a new environment in a given address as a coroutine.</p>
<p>Arguments and keyword arguments are passed down to the created environment
at initialization time.</p>
<p>If <a class="reference external" href="https://pypi.python.org/pypi/setproctitle">setproctitle</a> is
installed, this function renames the title of the process to start with
‘creamas’ so that the process is easily identifiable, e.g. with
<code class="docutils literal notranslate"><span class="pre">ps</span> <span class="pre">-x</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">creamas</span></code>.</p>
</dd></dl>

<dl class="function">
<dt id="creamas.mp.spawn_containers">
<code class="sig-prename descclassname">creamas.mp.</code><code class="sig-name descname">spawn_containers</code><span class="sig-paren">(</span><em class="sig-param">addrs</em>, <em class="sig-param">env_cls=&lt;class 'creamas.core.environment.Environment'&gt;</em>, <em class="sig-param">env_params=None</em>, <em class="sig-param">mgr_cls=&lt;class 'creamas.mp.EnvManager'&gt;</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#spawn_containers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.spawn_containers" title="Permalink to this definition">¶</a></dt>
<dd><p>Spawn environments in a multiprocessing <code class="xref py py-class docutils literal notranslate"><span class="pre">multiprocessing.Pool</span></code>.</p>
<p>Arguments and keyword arguments are passed down to the created environments
at initialization time if <em>env_params</em> is None. If <em>env_params</em> is not
None, then it is assumed to contain individual initialization parameters
for each environment in <em>addrs</em>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addrs</strong> – List of (HOST, PORT) addresses for the environments.</p></li>
<li><p><strong>env_cls</strong> – Callable for the environments. Must be a subclass of
<a class="reference internal" href="environment.html#creamas.core.environment.Environment" title="creamas.core.environment.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>.</p></li>
<li><p><strong>env_params</strong> (Iterable of same length as <em>addrs</em> or None.) – Initialization parameters for the environments.</p></li>
<li><p><strong>mgr_cls</strong> – Callable for the managers. Must be a subclass of
<a class="reference internal" href="#creamas.mp.EnvManager" title="creamas.mp.EnvManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnvManager</span></code></a>.s</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The created process pool and the <em>ApplyAsync</em> results for the spawned
environments.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="creamas.mp.start">
<em class="property">async </em><code class="sig-prename descclassname">creamas.mp.</code><code class="sig-name descname">start</code><span class="sig-paren">(</span><em class="sig-param">addr</em>, <em class="sig-param">env_cls</em>, <em class="sig-param">mgr_cls</em>, <em class="sig-param">*env_args</em>, <em class="sig-param">**env_kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/creamas/mp.html#start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#creamas.mp.start" title="Permalink to this definition">¶</a></dt>
<dd><p><a class="reference external" href="https://docs.python.org/3/library/asyncio-task.html#coroutine">Coroutine</a> that
starts an environment with <code class="xref py py-class docutils literal notranslate"><span class="pre">mgr_cls</span></code> manager agent.</p>
<p>The agent will connect to <em>addr</em> <code class="docutils literal notranslate"><span class="pre">('host',</span> <span class="pre">port)</span></code> and wait for commands
to spawn new agents within its environment.</p>
<p>The <em>env_args</em> and <em>env_kwargs</em> will be passed to <code class="xref py py-meth docutils literal notranslate"><span class="pre">env_cls.create()</span></code>
factory function.</p>
<p>This coroutine finishes after manager’s <code class="xref py py-meth docutils literal notranslate"><span class="pre">stop()</span></code> was called or when
a <a class="reference external" href="https://docs.python.org/3.7/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.7)"><code class="xref py py-exc docutils literal notranslate"><span class="pre">KeyboardInterrupt</span></code></a> is raised and calls <code class="xref py py-meth docutils literal notranslate"><span class="pre">env_cls.destroy()</span></code>
before it finishes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>addr</strong> – (HOST, PORT) for the new environment</p></li>
<li><p><strong>env_cls</strong> – Class of the environment, subclass of
<a class="reference internal" href="environment.html#creamas.core.environment.Environment" title="creamas.core.environment.Environment"><code class="xref py py-class docutils literal notranslate"><span class="pre">Environment</span></code></a>.</p></li>
<li><p><strong>mgr_cls</strong> – Class of the manager agent, subclass of
<a class="reference internal" href="#creamas.mp.EnvManager" title="creamas.mp.EnvManager"><code class="xref py py-class docutils literal notranslate"><span class="pre">EnvManager</span></code></a>.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="ds.html" class="btn btn-neutral float-right" title="Distributed Systems" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="simulation.html" class="btn btn-neutral float-left" title="Simulation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015-2019, Simo Linkola

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>